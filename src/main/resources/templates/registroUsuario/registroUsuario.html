<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="layout/layout :: head"></head>

<head th:fragment="head">

    <!-- Los iconos tipo Solid de Fontawesome-->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/solid.css">


	<script type="text/javascript">
		function InvalidMsg(textbox) {
			if (textbox.value == '') {

				textbox.setCustomValidity('Campo requerido');
			} else {
				textbox.setCustomValidity('');
			}

			return true;
		}

		function Invalid(textbox) {
			if (textbox.value != textbox.includes('@')) {

				textbox.setCustomValidity('Email debe contener @');
			}

			else if (textbox.value == '') {
				{
					textbox.setCustomValidity('Campo requerido');
				}

				return true;
			}
		}

		function InvalidEmail(textbox) {

			var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

			if (reg.test(textbox.value) == false) {
				alert('Invalid Email Address');
				return false;
			}

			return true;

		}


	</script>

	<script>
		function validarContrasena() {

			var pass = document.getElementById('pass').value;
			var pass1 = document.getElementById('pass1').value;
			var btn = document.getElementById('form')

			if (pass == pass1) {
				//Si son iguales
				//console.log("Las contrase�as son iguales");
				//alert("Contrase�as Correctas");
				return true;
			} else {
				//alert("Password incorrecta");
				btn.setAttribute('disabled', '')
				console.log("Las contrase�as son iguales");

			}

			return false;
		}
	</script>

<body>

        <nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
            <div class="container px-5">
                <a class="navbar-brand" href="/lo">Inicio</a>
            </div>
        </nav>

	<header class="masthead text-center text-white">
		<div class="masthead-content">
			<div class="modal-dialog text-center">
				<div class="col-sm-15 main-section">
					<div class="modal-content">

						<div class="dropdown" style="left:-0%;">
						<span class="border border-white">
						
				<h1 class="titulo-md color-negro" style="color:black">REGÍSTRATE</h1>
							<form class="col-12" id="form" th:action="@{/registroUsuario}" th:object="${usuario}"
								method="post" onsubmit="validarContrasena(); return true;">

								<div class="form-group" id="user-group">
									<input type="text" class="form-control" placeholder="Nombre" name="nombre"
										th:field="*{nombre}" oninvalid="InvalidMsg(this)" required />
								</div>
								<div class="form-group" id="user-group">
									<input type="text" class="form-control" placeholder="Apellido" name="apellido"
										th:field="*{apellido}" oninvalid="InvalidMsg(this)" required />
								</div>

								<div class="form-group" id="user-group">
									<input type="text" class="form-control" placeholder="Cedula" name="cedula"
										th:field="*{cedula}" oninvalid="InvalidMsg(this)" required />
								</div>
								<div class="form-group" id="user-group">
									<input type="text" class="form-control" placeholder="Email" name="mail"
										th:field="*{mail}" oninvalid="InvalidEmail(textbox)" required />
								</div>

								<div class="form-group" id="user-group">
									<input type="text" class="form-control" placeholder="Usuario" name="username"
										th:field="*{userName}" oninvalid="InvalidMsg(this)" required />
								</div>

								<div class="form-group" id="contrasena-group">
									<input type="password" id="pass" class="form-control" placeholder="Contraseña"
										name="password" th:field="*{password}" oninvalid="InvalidMsg(this)" required />
								</div>
								<div class="form-group" id="contrasena-group">
									<input type="password" id="pass1" class="form-control"
										placeholder="Repita Contraseña" name="repeatPassword"
										th:value="${repeatPassword}" oninvalid="InvalidMsg(this)" required />
								</div>
								<div class="form-group" id="contrasena-group">
									<input type="password" id="codigoRegistro" class="form-control"
										placeholder="Codigo Registro" name="codigoRegistro"
										th:field="*{codigoRegistro.codigo}" oninvalid="InvalidMsg(this)" required />
								</div>
								<button type="submit" class="btn btn-primary btn-md rounded-pill md-2">
									Registrarse
								</button>
							</form>
							<div th:if="${param.error}" class="alert alert-danger" role="alert">
								los campos no pueden estar vacios
							</div>
							<div class="alert alert-danger" th:if="${danger != null}" th:text="${danger}"></div>
							<div class="alert alert-success" th:if="${success != null}" th:text="${success}"></div>

							<div th:if="${param.logout}" class="alert alert-success" role="alert">
								Has cerrado Sesion


							</div>
							</span>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="bg-circle-1 bg-circle"></div>
		<div class="bg-circle-2 bg-circle"></div>
		<div class="bg-circle-3 bg-circle"></div>
		<div class="bg-circle-4 bg-circle"></div>

	</header>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
	<!-- Core theme JS-->
	<script src="js/scripts.js"></script>

</body>
</head>

</html>